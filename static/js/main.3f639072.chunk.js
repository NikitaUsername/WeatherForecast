(this["webpackJsonpweb2.2"]=this["webpackJsonpweb2.2"]||[]).push([[0],{35:function(e,t,a){e.exports=a(69)},40:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);a(27);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=(a(40),a(11)),s=a(12),l=a(14),u=a(13),p=a(15),m=a(4),d=a.n(m),h=a(9);function f(e){return v.apply(this,arguments)}function v(){return(v=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&APPID=1db91134dffc102e728e7a3d0ad5eb23"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=localStorage.getItem("list");if(null===t){var a={cities:[e]};localStorage.setItem("list",JSON.stringify(a))}else{var n=JSON.parse(t),r=(n.cities.push(e),n);localStorage.setItem("list",JSON.stringify(r))}}function w(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function b(e){var t=localStorage.getItem("list"),a=JSON.parse(t),n=a.cities.findIndex((function(t){return t===e}));a.cities.splice(n,1);var r=a;localStorage.setItem("list",JSON.stringify(r))}function O(){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g({coords:{latitude:59.93,longitude:30.31}}),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("http://api.openweathermap.org/data/2.5/weather?lat=".concat(t.coords.latitude,"&lon=").concat(t.coords.longitude,"&units=metric&APPID=1db91134dffc102e728e7a3d0ad5eb23"));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=a(8),D=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.gettingWeather()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("h2",{id:"title"},"\u041f\u043e\u0433\u043e\u0434\u0430 \u0437\u0434\u0435\u0441\u044c")),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("button",{id:"update-button",onClick:this.props.gettingWeather},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))))}}]),t}(r.a.Component);D.defaultProps={weatherMethod:function(e){return e}};var C={gettingWeather:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"ADD_LOCAL_WEATHER",weather:""}),navigator.geolocation.getCurrentPosition(function(){var e=Object(h.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(a);case 2:n=e.sent,t({type:"ADD_LOCAL_WEATHER",weather:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(h.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n=e.sent,t({type:"ADD_LOCAL_WEATHER",weather:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},k=Object(N.b)("",C)(D),A=a(21),x=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("div",{className:"row",id:"string"},r.a.createElement("p",null,"\u041f\u043e\u0433\u043e\u0434\u0430"),r.a.createElement("div",{className:"val"}," ",this.props.weatherData.weather[0].description," ")),r.a.createElement("div",{className:"row",id:"string"},r.a.createElement("p",null,"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("div",{className:"val"}," ",this.props.weatherData.main.pressure," hPA")),r.a.createElement("div",{className:"row",id:"string"},r.a.createElement("p",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430"),r.a.createElement("div",{className:"val"}," ",this.props.weatherData.wind.speed," m/s")),r.a.createElement("div",{className:"row",id:"string"},r.a.createElement("p",null,"\u041e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("div",{className:"val"}," ",this.props.weatherData.clouds.all," %")))}}]),t}(r.a.Component),I=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.props.weatherInfo.weather){var e="http://openweathermap.org/img/wn/"+this.props.weatherInfo.weather[0].icon+"@2x.png";return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("h2",{id:"cityname"},this.props.weatherInfo.name),r.a.createElement("div",{className:"row"},r.a.createElement("img",{id:"pic",src:e}),r.a.createElement("p",{id:"temp"}," ",this.props.weatherInfo.main.temp," \xbaC "))),r.a.createElement(x,{weatherData:this.props.weatherInfo})))}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h2",{id:"waiting"},"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f")),r.a.createElement("div",{className:"col-lg-12 "},r.a.createElement("div",{className:"center-block"},r.a.createElement(A.ClipLoader,{color:"#d3d3d3"})))))}}]),t}(r.a.Component),_=Object(N.b)((function(e){return{weatherInfo:e.localWeather}}))(I),W=a(20),S=a(34);var T=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.addWeather(this.props.cityName);this.props.favoriteCities.find((function(t){return t.name===e.props.cityName}))}},{key:"render",value:function(){var e=this,t=this.props.favoriteCities.find((function(t){return t.name===e.props.cityName}));return t.weather.weather?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("h2",{id:"cityname"},t.name)),r.a.createElement(x,{weatherData:t.weather}),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("button",{className:"close",onClick:function(){return e.props.deleteCity(t.name)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h2",{id:"waiting"},"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f")),r.a.createElement("div",{className:"col-lg-12 "},r.a.createElement("div",{className:"center-block"},r.a.createElement(A.ClipLoader,{color:"#d3d3d3"})))))}}]),t}(r.a.Component),H={addWeather:function(e){return function(){var t=Object(h.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f(e).then((function(t){a({type:"ADD_WEATHER",name:e,weather:t}),console.log(t)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteCity:function(e){return function(){var t=Object(h.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"DELETE_CITY",name:e}),b(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},L=Object(N.b)((function(e){return{favoriteCities:e.cities}}),H)(T),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).cityAdd=function(e){e.preventDefault(),a.props.addCity(e.target[0].value,a.props.favoriteCities)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("h2",{id:"title"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("form",{onSubmit:this.cityAdd},r.a.createElement("input",{id:"inputfld",placeholder:"\u0413\u043e\u0440\u043e\u0434"}),r.a.createElement("input",{id:"update-button",type:"submit",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})))),r.a.createElement("div",{className:"row"},this.props.favoriteCities.map((function(e){return r.a.createElement(L,{key:e.name,cityName:e.name})}))))}}]),t}(r.a.Component),M={addCity:function(e,t){return console.log(e),e=w(e),function(){var a=Object(h.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=5;break}return n({type:"SHOW_HIDE_MODAL",payload:"Please enter the city",turn:"true"}),a.abrupt("return");case 5:if(-1!==t.findIndex((function(t){return t.name===e}))){a.next=9;break}f(e).then((function(t){t.clouds?(n({type:"ADD_CITY",name:e}),E(e)):n({type:"SHOW_HIDE_MODAL",payload:"City not found",turn:"true"})})),a.next=11;break;case 9:return n({type:"SHOW_HIDE_MODAL",payload:"This city is already added",turn:"true"}),a.abrupt("return");case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},J=Object(N.b)((function(e){return{favoriteCities:e.cities}}),M)(P),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.handleModal()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W.a,{show:this.props.showModal,onHide:this.handleClose,animation:!1},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,null,"Error")),r.a.createElement(W.a.Body,null,this.props.modalText),r.a.createElement(W.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:this.handleClose},"Ok"))),r.a.createElement(k,null),r.a.createElement(_,null),r.a.createElement(J,null))}}]),t}(r.a.Component),B={handleModal:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SHOW_HIDE_MODAL",payload:"",turn:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Y=Object(N.b)((function(e){return{showModal:e.showModal,modalText:e.modalText}}),B)(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(18),F=a(32),U=a(33),$=a(22);var z={cities:function(){var e=JSON.parse(localStorage.getItem("list"));return null===e?[]:e.cities.map((function(e){return{name:w(e),weather:{}}}))}(),localWeather:[],showModal:!1,modalText:""};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(U.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY":var a=Object($.a)(e.cities),n={name:t.name,weather:[]};return a.push(n),K({},e,{cities:a});case"DELETE_CITY":var r=Object($.a)(e.cities),c=r.findIndex((function(e){return e.name===t.name}));return r.splice(c,1),K({},e,{cities:r});case"ADD_WEATHER":var i=Object($.a)(e.cities),o=i.findIndex((function(e){return e.name===t.name}));return i[o]=K({},i[o],{weather:t.weather}),K({},e,{cities:i});case"ADD_LOCAL_WEATHER":return K({},e,{localWeather:t.weather});case"SHOW_HIDE_MODAL":return K({},e,{showModal:t.turn,modalText:t.payload});default:return z}},V=Object(q.c)(Q,{},Object(q.a)(F.a));i.a.render(r.a.createElement(N.a,{store:V}," ",r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.3f639072.chunk.js.map